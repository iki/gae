








<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "DTD/xhtml1-transitional.dtd">
















 
 
 
 
 
  
  


<html>
  <head>
    <script type="text/javascript" language="JavaScript">
    ORIGINAL_PAGE_PATH = "/appengine/docs/python/datastore/metadataqueries.html";
    </script>
    
    
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<title>Metadata Queries - Google App Engine - Google Code</title>
<script type="text/javascript"><!--
(function(){function a(){this.t={};this.tick=function(c){this.t[c]=(new Date).getTime()};this.tick("start")}var b=new a;window.jstiming={Timer:a,load:b};if(window.external&&window.external.pageT)window.jstiming.pt=window.external.pageT;})();

var _tocPath_ = '/appengine/docs/_toc.ezt';
var codesite_token = null;
var logged_in_user_email = null;
//--></script>
<link href="../../../../css/codesite.pack.04102009.css" type="text/css" rel="stylesheet">
<script src="../../../../js/codesite_head.pack.04102009.js" type="text/javascript"></script>
<script type="text/javascript">CODESITE_CSITimer['load'].tick('bhs');</script>
<link rel="search" type="application/opensearchdescription+xml" title="Google Code" href="http://code.google.com/osd.xml">

<!--[if IE]><link rel="stylesheet" type="text/css" href="../../../../css/iehacks.css"><![endif]-->

    <link href="../../../../css/semantic_headers.css" rel="stylesheet" type="text/css" />
    <link href="../../../css/local_extensions.css" rel="stylesheet" type="text/css" />
  </head>

  <body class="gc-documentation">

    
    
    <div id="gb">
 <span>
  
    <a id="lang-dropdown" href="http://code.google.com" onclick="return false;"><span style="text-decoration:underline">English</span> <span style="font-size:.75em;">&#9660;</span></a>
  
 </span>
</div>

<div class="gbh" style="left:0px;"></div>
<div class="gbh" style="right:0px;"></div>

<div id="gc-container">
<a id="top"></a>
<div id="skipto">
  <a href="#gc-pagecontent">Skip to page content</a>
  <a href="#gc-toc">Skip to main navigation</a>
</div>

<div id="gc-header">
  <div id="logo"><a href="http://code.google.com">
  
  
     <img src="../../../../images/code_logo.gif" height="40" width="167" alt="Google Code" style="border:0;margin:3px 0 0 0;">
  
  
  </a></div>
  <div id="search">
    <div id="searchForm">
      <form id="cse" action="http://www.google.com/cse" accept-charset="utf-8" onsubmit="executeGSearch(document.getElementById('gsearchInput').value); return false;">
      <noscript>
      <input type="hidden" name="cref" value="http://code.google.com/cse/googlecode-context.xml">
      </noscript>
      <div id="gsc-search-box">
        <input id="gsearchInput" type="text" name="q" maxlength="2048" class="gsc-input" autocomplete="off" title="Google Code Search" style="width:345px">
        <div id="cs-searchresults" onclick="event.cancelBubble = true;"></div>
        <input title="Search" id="gsearchButton" class="gsc-search-button" name="sa" value="Search" type="submit">
        <div class="greytext">e.g. "templates" or "datastore"</div>
      </div>
      </form>
    </div> <!-- end searchForm -->
  </div> <!-- end search -->




</div> <!-- end gc-header -->


<div id="codesiteContent">

<a id="gc-topnav-anchor"></a>
<div id="gc-topnav">
  <h1 style="padding:0 0 0 6px;">Google App Engine</h1>
  <ul id="docs" class="gc-topnav-tabs">

    <li id="home_link">
      <a href="../../../index.html" title="Google App Engine home page">Home</a>
    </li>
  
    <li id="docs_link">
      <a href="../../index.html" class="selected" title="Official Google App Engine documentation">Docs</a>
    </li>
  
    <li id="faq_link">
      <a href="../../../kb/index.html" title="Answers to frequently asked questions about Google App Engine">FAQ</a>
    </li>
  
    <li id="articles_link">
      <a href="../../../articles/index.html" title="Focused articles and tutorials for Google App Engine developers">Articles</a>
    </li>
  
    <li>
      <a href="http://googleappengine.blogspot.com/" title="Official Google App Engine blog">Blog</a>
    </li>
  
    <li>
      <a href="../../../community.html" title="Community home for Google App Engine">Community</a>
    </li>
  
    <li>
      <a href="../../../terms.html" title="Google App Engine terms of service">Terms</a>
    </li>
  
    <li>
      <a href="../../../downloads.html" title="Download Google App Engine">Download</a>
    </li>
  

  </ul>
</div> <!-- end gc-topnav -->

    <div class="g-section g-tpl-170">

      <div class="g-unit g-first" id="gc-toc">
        <ul>
  <li><a href="../../../downloads.html">Downloads</a></li>
  <li><a href="../../../tools_tips.html">Tools and Tips</a> <sup class="new">New!</sup></li>
  <li><a href="http://code.google.com/status/appengine">System Status</a></li>
  <li><a href="http://code.google.com/p/googleappengine/issues/list">Issue Tracker</a></li>
  <li><a href="../../../business/index.html">App Engine for Business</a> <sup class="new">New!</sup></li>
</ul>
<div class="line"></div>
<ul>
  <li><h2>Getting Started</h2>
    <ul>
      <li><a href="../../whatisgoogleappengine.html">What Is Google App Engine?</a></li>
      <li><a href="../../java/gettingstarted/index.html">Java</a>
        <ul>
              <li><a href="../../java/gettingstarted/introduction.html">Introduction</a></li>
    <li><a href="../../java/gettingstarted/installing.html">Installing the Java SDK</a></li>
    <li><a href="../../java/gettingstarted/creating.html">Creating a Project</a></li>
    <li><a href="../../java/gettingstarted/usingusers.html">Using the Users Service</a></li>
    <li><a href="../../java/gettingstarted/usingjsps.html">Using JSPs</a></li>
    <li><a href="../../java/gettingstarted/usingdatastore.html">Using the Datastore with JDO</a></li>
    <li><a href="../../java/gettingstarted/staticfiles.html">Using Static Files</a></li>
    <li><a href="../../java/gettingstarted/uploading.html">Uploading Your Application</a></li>

        </ul>
      </li>
      <li><a href="../gettingstarted/index.html">Python</a>
        <ul>
            <li><a href="../gettingstarted/introduction.html">Introduction</a></li>
  <li><a href="../gettingstarted/devenvironment.html">The Development Environment</a></li>
  <li><a href="../gettingstarted/helloworld.html">Hello, World!</a></li>
  <li><a href="../gettingstarted/usingwebapp.html">Using the webapp Framework</a></li>
  <li><a href="../gettingstarted/usingusers.html">Using the Users Service</a></li>
  <li><a href="../gettingstarted/handlingforms.html">Handling Forms With webapp</a></li>
  <li><a href="../gettingstarted/usingdatastore.html">Using the Datastore</a></li>
  <li><a href="../gettingstarted/templates.html">Using Templates</a></li>
  <li><a href="../gettingstarted/staticfiles.html">Using Static Files</a></li>
  <li><a href="../gettingstarted/uploading.html">Uploading Your Application</a></li>

        </ul>
      </li>
    </ul>
  </li>
</ul>
<div class="line"></div>
<ul>
  <li><h2>Java</h2>
    <ul>
          <li><a href="../../java/overview.html">Overview</a></li>
    <li><a href="../../java/runtime.html">Servlet Environment</a></li>
    <li><a href="../../java/datastore/index.html">Storing Data</a>
      <ul>
            <li><a href="../../java/datastore/overview.html">Overview</a></li>
    <li><a href="../../java/datastore/entities.html">Entities</a></li>
    <li><a href="../../java/datastore/queries.html">Queries</a></li>
    <li><a href="../../java/datastore/transactions.html">Transactions</a></li>
    <li><a href="../../java/datastore/hr/index.html">Choosing a Datastore</a></li>
    <li><a href="../../java/datastore/hr/overview.html">Using the High Replication Datastore</a></li>
    <li><a href="../../java/datastore/metadataqueries.html">Metadata Queries</a></li>
    <li><a href="../../java/datastore/stats.html">Statistics</a></li>
    <li><a href="../../java/datastore/async.html">Async API</a></li>
    <li><a href="../../java/datastore/jdo/index.html">JDO</a>
      <ul>
            <li><a href="../../java/datastore/jdo/overview.html">Overview</a></li>
    <li><a href="../../java/datastore/jdo/dataclasses.html">Defining Data Classes with JDO</a></li>
    <li><a href="../../java/datastore/jdo/creatinggettinganddeletingdata.html">Creating, Getting, and Deleting Data in JDO</a></li>
    <li><a href="../../java/datastore/jdo/relationships.html">Entity Relationships in JDO</a></li>
    <li><a href="../../java/datastore/jdo/queries.html">Queries in JDO</a></li>

      </ul>
    </li>
    <li><a href="../../java/datastore/jpa/index.html">JPA</a>
      <ul>
            <li><a href="../../java/datastore/jpa/overview.html">Overview</a></li>

      </ul>
    </li>
    <li><a href="../../java/javadoc/com/google/appengine/api/datastore/package-summary.html">Javadoc Reference</a></li>

      </ul>
    </li>
    <li><a href="../../java/apis.html">Services</a>
      <ul>
        <li><a href="../../java/blobstore/index.html">Blobstore</a>
          <ul>
            <li><a href="../../java/blobstore/overview.html">Overview</a></li>
<li><span class="tlw-title tlw-expanded">Reference</span>
  <ul>
    <li><a href="../../java/javadoc/com/google/appengine/api/blobstore/package-summary.html">API Reference</a></li>
  </ul>
</li>

          </ul>
        </li>
        <li><a href="../../java/capabilities/index.html">Capabilities</a>
          <ul>
            <li><a href="../../java/capabilities/overview.html">Overview</a></li>
<li><a href="../../java/javadoc/com/google/appengine/api/capabilities/package-summary.html">Javadoc Reference</a></li>

          </ul>
        </li>
        <li><a href="../../java/channel/index.html">Channel</a>
          <ul>
            <li><a href="../../java/channel/overview.html">Overview</a></li>
<li><a href="../../java/javadoc/com/google/appengine/api/channel/package-summary.html">Javadoc Reference</li>
<li><a href="../../java/channel/javascript.html">JavaScript Reference</a></li>

          </ul>
        </li>
        <li><a href="../../java/images/index.html">Images</a>
          <ul>
                <li><a href="../../java/images/overview.html">Overview</a></li>
    <li><a href="../../java/javadoc/com/google/appengine/api/images/package-summary.html">API Reference</a></li>

          </ul>
        </li>
        <li><a href="../../java/mail/index.html">Mail</a>
          <ul>
                <li><a href="../../java/mail/overview.html">Overview</a></li>
    <li><a href="../../java/mail/usingjavamail.html">Using JavaMail to Send Mail</a></li>
    <li><a href="../../java/mail/receiving.html">Receiving Mail</a></li>
    <li><a href="../../java/javadoc/com/google/appengine/api/mail/package-summary.html">Low-level API</a></li>

          </ul>
        </li>
        <li><a href="../../java/memcache/index.html">Memcache</a>
          <ul>
                <li><a href="../../java/memcache/overview.html">Overview</a></li>
    <li><a href="../../java/memcache/usingjcache.html">Using JCache</a></li>
    <li><a href="../../java/javadoc/com/google/appengine/api/memcache/package-summary.html">Low-level API</a></li>

          </ul>
        </li>
        <li><a href="../../java/multitenancy/index.html">Multitenancy</a>	
          <ul>	
                  <li><a href="../../java/multitenancy/overview.html">Overview</a></li>
    <li><a href="../../java/multitenancy/multitenancy.html">Multitenancy with Namespaces</a></li>
    <li><a href="../../java/multitenancy/namespaces.html">Other Uses for Namespaces</a></li>
    <li><a href="../../java/javadoc/com/google/appengine/api/NamespaceManager.html">API Reference</a>
	
          </ul>	
        </li>
        <li><a href="../../java/oauth/index.html">OAuth</a>
          <ul>
                <li><a href="../../java/oauth/overview.html">Overview</a></li>
    <li><a href="../../java/javadoc/com/google/appengine/api/oauth/package-summary.html">API Reference</a></li>


          </ul>
        </li>
        <li><a href="../../java/taskqueue/index.html">Task Queues</a>
          <ul>
                 <li><a href="../../java/taskqueue/overview.html">Overview</a></li>
     <li><a href="../../java/javadoc/com/google/appengine/api/taskqueue/package-summary.html">API Reference</a></li>

          </ul>
        </li>
        <li><a href="../../java/urlfetch/index.html">URL Fetch</a>
          <ul>
                <li><a href="../../java/urlfetch/overview.html">Overview</a></li>
    <li><a href="../../java/urlfetch/usingjavanet.html">Using java.net</a></li>
    <li><a href="../../java/javadoc/com/google/appengine/api/urlfetch/package-summary.html">Low-level API</a></li>

          </ul>
        </li>
        <li><a href="../../java/users/index.html">Users</a>
          <ul>
                <li><a href="../../java/users/overview.html">Overview</a></li>
    <li><a href="../../java/javadoc/com/google/appengine/api/users/package-summary.html">API Reference</a></li>

          </ul>
        </li>
        <li><a href="../../java/xmpp/index.html">XMPP</a>
          <ul>
                 <li><a href="../../java/xmpp/overview.html">Overview</a></li>
     <li><a href="../../java/javadoc/com/google/appengine/api/xmpp/package-summary.html">API Reference</a></li>

          </ul>
        </li>
      </ul>
    </li>
    <li><a href="../../java/javadoc/index.html">Services Javadoc</a></li>
    <li><a href="../../java/jrewhitelist.html">JRE Class White List</a></li>
    <li><a href="../../java/config/index.html">Configuration</a>
      <ul>
            <li><a href="../../java/config/webxml.html">Deployment Descriptor</a></li>
    <li><a href="../../java/config/appconfig.html">App Config</a></li>
    <li><a href="../../java/config/indexconfig.html">Index Config</a></li>
    <li><a href="../../java/config/cron.html">Scheduled Tasks</a></li>
    <li><a href="../../java/config/queue.html">Task Queue Config</a></li>
    <li><a href="../../java/config/dos.html">DoS Protection Config</a></li>

      </ul>
    </li>
    <li><a href="../../java/configyaml/index.html">YAML Configuration</a>
      <ul>
                <li><a href="../../java/configyaml/appconfig_yaml.html">YAML App Config</a></li>
        <li><a href="../../java/configyaml/indexconfig.html">Index Config</a></li>
        <li><a href="../../java/configyaml/cron.html">Scheduled Tasks</a></li>
        <li><a href="../../java/configyaml/queue.html">Task Queue Config</a></li>
        <li><a href="../../java/configyaml/dos.html">DoS Protection Config</a></li>

      </ul>
    </li>
    <li><a href="../../java/tools/index.html">Tools</a>
      <ul>
            <li><a href="../../java/tools/devserver.html">Development Server</a></li>
    <li><a href="../../java/tools/uploadinganapp.html">Uploading and Managing</a></li>
    <li><a href="../../java/tools/eclipse.html">Google Plugin for Eclipse</a></li>
    <li><a href="../../java/tools/ant.html">Using Apache Ant</a></li>
    <li><a href="../../java/tools/localunittesting.html">Local Unit Testing</a>
        <ul>
            <li><a href="../../java/tools/localunittesting/javadoc/index.html">Testing Javadoc</a></li>
        </ul>    
    </li>
    <li><a href="../../java/tools/appstats.html">Appstats</a></li>

      </ul>
    </li>
    <li><a href="../../java/howto/index.html">How-To</a>
      <ul>
              <li><a href="../../java/howto/maintenance.html">Handling Scheduled Maintenance Periods</a></li>

      </ul>
    </li>

    </ul>
  </li>
</ul>
<div class="line"></div>
<ul>
  <li><h2>Python</h2>
    <ul>
          <li><a href="../overview.html">Overview</a></li>
    <li><a href="../runtime.html">CGI Environment</a></li>
    <li><a href="index.html">Storing Data</a>
      <ul>
              <li><a href="overview.html">Datastore Overview</a></li>
      <li><a href="entities.html">Entities</a></li>
      <li><a href="queries.html">Queries</a></li>
      <li><a href="transactions.html">Transactions</a></li>
      <li><a href="datamodeling.html">Data Modeling</a></li>
      <li><a href="gqlreference.html">GQL Reference</a></li>
      <li><a href="hr/index.html">Choosing a Datastore</a></li>
      <li><a href="hr/overview.html">Using the High Replication Datastore</a></li>
      <li><a href="metadataqueries.html">Metadata Queries</a></li>
      <li><a href="stats.html">Statistics</a></li>
      <li><span class="tlw-title tlw-expanded">Reference</span>
        <ul>
          <li><a href="typesandpropertyclasses.html">Types and Property Classes</a></li>
          <li><a href="gqlreference.html">GQL Reference</a></li>
          <li><a href="modelclass.html">Model</a></li>
          <li><a href="expandoclass.html">Expando</a></li>
          <li><a href="polymodelclass.html">PolyModel</a></li>
          <li><a href="propertyclass.html">Property</a></li>
          <li><a href="queryclass.html">Query</a></li>
          <li><a href="gqlqueryclass.html">GqlQuery</a></li>
          <li><a href="metadataqueryclass.html">Metadata Query</a></li>
          <li><a href="keyclass.html">Key</a></li>
          <li><a href="functions.html">Functions</a></li>
          <li><a href="exceptions.html">Exceptions</a></li>
        </ul>
      </li>

      </ul>
    </li>
    <li><a href="../apis.html">Services</a>
      <ul>
        <li><a href="../blobstore/index.html">Blobstore</a>
          <ul>
            <li><a href="../blobstore/overview.html">Overview</a></li>
<li><span class="tlw-title tlw-expanded">Reference</span>
  <ul>
    <li><a href="../blobstore/blobinfoclass.html">BlobInfo</a></li>
    <li><a href="../blobstore/blobkeyclass.html">BlobKey</a></li>
    <li><a href="../blobstore/blobreaderclass.html">BlobReader</a></li>
    <li><a href="../blobstore/functions.html">Functions</a></li>
    <li><a href="../blobstore/exceptions.html">Exceptions</a></li>
  </ul>
</li>

          </ul>
        </li>
        <li><a href="../capabilities/index.html">Capabilities</a>
          <ul>
            <li><a href="../capabilities/overview.html">Overview</a></li>
<li><span class="tlw-title tlw-expanded">Reference</span>
  <ul>
    <li><a href="../capabilities/capabilitysetclass.html">CapabilitySet</a></li>
    <li><a href="../capabilities/exceptions.html">Exceptions</a></li>
  </ul>
</li>

          </ul>
        </li>
        <li><a href="../channel/index.html">Channel</a>
          <ul>
            <li><a href="../channel/overview.html">Overview</a></li>
<li><span class="tlw-title tlw-expanded">Reference</span>
  <ul>
    <li><a href="../channel/functions.html">Functions</a></li>
    <li><a href="../channel/exceptions.html">Exceptions</a></li>
    <li><a href="../channel/javascript.html">Client Javascript Reference</a></li>
  </ul>
</li>

          </ul>
        </li>
        <li><a href="../images/index.html">Images</a>
          <ul>
                 <li><a href="../images/overview.html">Overview</a></li>
     <li><a href="../images/installingPIL.html">Installing PIL</a></li>
     <li><a href="../images/usingimages.html">Using the Images API</a></li>
     <li><span class="tlw-title tlw-expanded">Reference</span>
       <ul>
         <li><a href="../images/imageclass.html">Image</a></li>
         <li><a href="../images/functions.html">Functions</a></li>
         <li><a href="../images/exceptions.html">Exceptions</a></li>
       </ul>
     </li>

          </ul>
        </li>
        <li><a href="../mail/index.html">Mail</a>
          <ul>
                 <li><a href="../mail/overview.html">Overview</a></li>
     <li><a href="../mail/sendingmail.html">Sending Mail</a></li>
     <li><a href="../mail/receivingmail.html">Receiving Mail</a></li>
     <li><a href="../mail/attachments.html">Attachments</a></li>
     <li><span class="tlw-title tlw-expanded">Reference</span>
       <ul>
         <li><a href="../mail/emailmessageclass.html">EmailMessage</a></li>
         <li><a href="../mail/emailmessagefields.html">Message Fields</a></li>
         <li><a href="../mail/functions.html">Functions</a></li>
         <li><a href="../mail/exceptions.html">Exceptions</a></li>
       </ul>
     </li>

          </ul>
        </li>
        <li><a href="../memcache/index.html">Memcache</a>
          <ul>
                 <li><a href="../memcache/overview.html">Overview</a></li>
      <li><a href="../memcache/usingmemcache.html">Using Memcache</a></li>
     <li><span class="tlw-title tlw-expanded">Reference</span>
       <ul>
         <li><a href="../memcache/clientclass.html">Client</a></li>
         <li><a href="../memcache/functions.html">Functions</a></li>
       </ul>
     </li>

          </ul>
        </li>
        <li><a href="../multitenancy/index.html">Multitenancy</a>
          <ul>
                  <li><a href="../multitenancy/overview.html">Overview</a></li>
    <li><a href="../multitenancy/multitenancy.html">Multitenancy with Namespaces</a></li>
    <li><a href="../multitenancy/namespaces.html">Other Uses for Namespaces</a></li>
    <li>Reference
      <ul>
        <li><a href="../multitenancy/functions.html">Functions</a></li>
        <li><a href="../multitenancy/exceptions.html">Exceptions</a></li>
      </ul>
    </li>

          </ul>
        </li>
        <li><a href="../oauth/index.html">OAuth</a>
          <ul>
                 <li><a href="../oauth/overview.html">Overview</a></li>
     <li><span class="tlw-title tlw-expanded">Reference</span>
       <ul>
         <li><a href="../oauth/functions.html">Functions</a></li>
         <li><a href="../oauth/exceptions.html">Exceptions</a></li>
       </ul>
     </li>

          </ul>
        </li>
        <li><a href="../taskqueue/index.html">Task Queues</a>
          <ul>
                 <li><a href="../taskqueue/overview.html">Overview</a></li>
     <li><span class="tlw-title tlw-expanded">Reference</span>
       <ul>
         <li><a href="../taskqueue/tasks.html">Task Class</a></li>
         <li><a href="../taskqueue/queues.html">Queue Class</a></li>
         <li><a href="../taskqueue/functions.html">Functions</a></li>
         <li><a href="../taskqueue/exceptions.html">Exceptions</a></li>
       </ul>
     </li>

          </ul>
        </li>
        <li><a href="../urlfetch/index.html">URL Fetch</a>
          <ul>
                 <li><a href="../urlfetch/overview.html">Overview</a></li>
     <li><span class="tlw-title tlw-expanded">Reference</span>
       <ul>
         <li><a href="../urlfetch/fetchfunction.html">The fetch Function</a></li>
         <li><a href="../urlfetch/asynchronousrequests.html">Asynchronous Requests</a></li>
         <li><a href="../urlfetch/responseobjects.html">Response Objects</a></li>
         <li><a href="../urlfetch/exceptions.html">Exceptions</a></li>
       </ul>
     </li>

          </ul>
        </li>
        <li><a href="../users/index.html">Users</a>
          <ul>
                 <li><a href="../users/overview.html">Overview</a></li>
     <li><a href="../users/userobjects.html">User Objects</a></li>
     <li><a href="../users/loginurls.html">Login URLs</a></li>
     <li><a href="../users/adminusers.html">Admin Users</a></li>

     <li><span class="tlw-title tlw-expanded">Reference</span>
       <ul>
         <li><a href="../users/userclass.html">User</a></li>
         <li><a href="../users/functions.html">Functions</a></li>
         <li><a href="../users/exceptions.html">Exceptions</a></li>
       </ul>
     </li>

          </ul>
        </li>
        <li><a href="../xmpp/index.html">XMPP</a>
          <ul>
                 <li><a href="../xmpp/overview.html">Overview</a></li>
     <li><span class="tlw-title tlw-expanded">Reference</span>
       <ul>
         <li><a href="../xmpp/functions.html">Functions</a></li>
         <li><a href="../xmpp/messageclass.html">Message</a></li>
         <li><a href="../xmpp/exceptions.html">Exceptions</a></li>
       </ul>
     </li>

          </ul>
        </li>
      </ul>
    </li>
    <li><a href="../config/index.html">Configuration</a>
      <ul>
            <li><a href="../config/appconfig.html">App Config</a></li>
    <li><a href="../config/indexconfig.html">Index Config</a></li>
    <li><a href="../config/cron.html">Scheduled Tasks</a></li>
    <li><a href="../config/queue.html">Task Queue Config</a></li>
    <li><a href="../config/dos.html">DoS Protection Config</a></li>

      </ul>
    </li>
    <li><a href="../tools/index.html">Tools</a>
      <ul>
            <li><a href="../tools/devserver.html">Development Server</a></li>
    <li><a href="../tools/uploadinganapp.html">Uploading and Managing</a></li>
    <li><a href="../tools/uploadingdata.html">Uploading and Downloading Data</a></li>
    <li><a href="../tools/webapp/index.html">webapp Framework</a>
      <ul>
             <li><a href="../tools/webapp/overview.html">Overview</a></li>
     <li><a href="../tools/webapp/running.html">Running the Application</a></li>
     <li><a href="../tools/webapp/requesthandlers.html">Request Handlers</a></li>
     <li><a href="../tools/webapp/requestdata.html">Request Data</a></li>
     <li><a href="../tools/webapp/buildingtheresponse.html">Building the Response</a></li>
     <li><a href="../tools/webapp/redirects.html">Redirects, Headers and Status Codes</a></li>
     <li><a href="../tools/webapp/blobstorehandlers.html">Blobstore Handlers</a></li>

     <li><span class="tlw-title tlw-expanded">Reference</span>
       <ul>
         <li><a href="../tools/webapp/requestclass.html">Request</a></li>
         <li><a href="../tools/webapp/responseclass.html">Response</a></li>
         <li><a href="../tools/webapp/requesthandlerclass.html">RequestHandler</a></li>
         <li><a href="../tools/webapp/wsgiapplicationclass.html">WSGIApplication</a></li>
         <li><a href="../tools/webapp/utilmodule.html">Utility Functions</a></li>
         
       </ul>
     </li>

      </ul>
    </li>
    <li><a href="../tools/appstats.html">Appstats</a></li>
    <li><a href="../tools/libraries.html">Third-party Libraries</a></li>

      </ul>
    </li>
    <li><a href="../howto/index.html">How-To</a>
      <ul>
              <li><a href="../howto/usinggdataservices.html">Google Data Services</a></li>
      <li><a href="../howto/maintenance.html">Handling Scheduled Maintenance Periods</a></li>

      </ul>
    </li>

    </ul>
  </li>
</ul>
<div class="line"></div>
<ul>
  <li><h2>Managing Your App</h2>
    <ul>
      <li><a href="../../adminconsole/index.html">Admin Console</a>
        <ul>
          <li><a href="../../adminconsole/instances.html">Instances</a></li>
<li><a href="../../adminconsole/applicationsettings.html">Application</a></li>
<li><a href="../../adminconsole/datastoreadmin.html">Datastore</a></li>
        </ul>
      </li>
      <li><a href="../../quotas.html">Quotas</a></li>
      <li><a href="../../billing.html">Billing</a></li>
      <li><a href="../../domain.html">Using a Custom Domain</a></li>
    </ul>
  </li>
</ul>
<div class="line"></div>
<ul>
  <li><h2>Resources</h2>
    <ul>
      <li><a href="../../../kb/index.html">FAQ</a></li>
      <li><a href="../../../articles/index.html">Articles</a></li>
      <li><a href="http://appengine-cookbook.appspot.com/">Cookbook</a></li>
      <li><a href="http://code.google.com/p/googleappengine/">SDK Code</a></li>
      <li><a href="http://code.google.com/p/datanucleus-appengine/">JDO/JPA Code</a></li>
      <li><a href="http://code.google.com/p/google-app-engine-samples/">Sample Apps Code</a></li>
      <li>Launcher Code
        <ul>
          <li><a href="http://code.google.com/p/google-appengine-mac-launcher/">Mac</a></li>
          <li><a href="http://code.google.com/p/google-appengine-wx-launcher/">Windows/wx</a></li>
        </ul>
      </li>
      <li><a href="../../../community.html">Discussion Groups</a></li>
    </ul>
  </li>
</ul>
<div class="line"></div>
<ul>
  <li><a href="../../roadmap.html">Product Roadmap</a></li>
  <li><a href="http://code.google.com/p/googleappengine/wiki/SdkReleaseNotes">Release Notes: Python</a></li>
  <li><a href="http://code.google.com/p/googleappengine/wiki/SdkForJavaReleaseNotes">Release Notes: Java</a></li>
  <li><a href="../../revision_history.html">Revision History</a></li>
</ul>

        <a class="hidden" href="#gc-topnav-anchor">More Google App Engine resource links</a>
      </div>

      <div class="g-unit" id="gc-pagecontent">
        <h1 class="page_title">Metadata Queries</h1>







<p>
  Metadata queries allow you to easily construct expressions that return metadata from your datastore about namespaces, kinds, and properties. The queries return your metadata in dynamically generated entities. The metadata returned is current as of the time of your query.
</p>
<p>
  The most common use for metadata is to implement back-end administrative functions, meta-programming environments, etc. For example, you can use metadata queries to build a custom administration console for your application.
</p>
<p>
  You can also find metadata about your application in the Datastore Admin tab of your Admin Console, but the data displayed there has some important differences to that returned by metadata queries:
</p>
<ul>
  <li><b>Freshness</b> &ndash; Metadata queries return data that is current as of the time of the query. Data in the Datastore Admin tab is updated only once daily.</li>
  <li><b>Comprehensiveness</b> &ndash; The data in the Datastore Admin tab is more comprehensive than what is available via metadata queries.</li>
  <li><b>Cost</b> &ndash; Metadata queries <a href="#Quota_Usage">use more quota</a> than normal queries.</li>
</ul>

<p>
  This documentation describes the following aspects of metadata queries:
</p>

<ul>
  <li><a href="#Metadata_Queries_Lang">Metadata Queries in Python</a></li>
  <li><a href="#Namespace_Queries">Namespace Queries</a></li>
  <li><a href="#Kind_Queries">Kind Queries</a></li>
  <li><a href="#Property_Queries">Property Queries</a></li>
  <li><a href="#Property_Representation_Queries">Property Representation Queries</a></li>
  <li><a href="#Quota_Usage">Quota Usage</a></li>
</ul>


<h2 id="Metadata_Queries_Lang">Metadata Queries in Python</h2>
<p>In Python, the models for metadata queries are available in <a href="metadataqueryclass.html">google.appengine.ext.db.metadata</a>. These models each provide special kinds that are reserved in the datastore for metadata queries. These models and kinds will not conflict with models and kinds of the same name that already exist in your application. The models and their associated kinds are:</p>

<table>
  <tr>
    <th>Model</th>
    <th>Kind</th>
  </tr>
  <tr>
    <td><a href="metadataqueryclass.html#Namespace">google.appengine.ext.db.metadata.Namespace</a></td>
    <td><code>__namespace__</code></td>
  </tr>
  <tr>
    <td><a href="metadataqueryclass.html#Kind">google.appengine.ext.db.metadata.Kind</a></td>
    <td><code>__kind__</code></td>
  </tr>
  <tr>
    <td><a href="metadataqueryclass.html#Property">google.appengine.ext.db.metadata.Property</a></td>
    <td><code>__property__</code></td>
  </tr>
</table>

<p>
  By querying on these kinds, you can return entities containing the requested metadata. These entities are generated dynamically, based on the datastore's current state. While you can create local Python instances of the Namespace, Kind, and Property models, you can't store them in the datastore. If you attempt to do so, the system throws a <a href="exceptions.html#BadRequestError">BadRequestError()</a> error with a message saying the kind is illegal.
</p>
<p>
  The following simple code example uses a <a href="gqlqueryclass.html">GQL query</a> to print all of your application's namespaces:
</p>
<pre class="prettyprint">
import google.appengine.ext.db

q = db.GqlQuery("SELECT * FROM __namespace__")
for p in q.fetch(100):
  print "namespace: '%s'" % p.namespace_name
</pre>



<h2 id="Namespace_Queries">Namespace Queries</h2>
<p>
  If your application uses the <a href="../multitenancy/index.html">Namespaces API</a>, you can use a metadata query to find all namespaces cited in entity records. This allows you to more easily perform cross-namespace activities, such as administrative functions.
</p>
<p>
  The model for the special <code>__namespace__</code> kind is in google.appengine.ext.db.metadata.Namespace. You can perform <code>__namespace__</code> queries using the <a href="gqlqueryclass.html">GqlQuery</a> interface (as above), or the usual <a href="queryclass.html#Query">Query</a> interface returned by the <code>Namespace.all()</code> method.
</p>
<p>
  For instance, the following GQL query prints all your application's namespaces:
</p>
<pre class="prettyprint">
import google.appengine.ext.db
from google.appengine.ext.db.metadata import Namespace

q = db.GqlQuery("SELECT * FROM __namespace__")
for p in q.fetch(100):
  print "namespace: '%s'" % p.namespace_name
</pre>
<p>
  Namespace queries return entities whose key is the name of the namespace, except for the empty namespace, which has a key with numerical id <code>1</code> (the empty string is not a valid key name). These entities have no properties; therefore, keys-only and non-keys-only queries return the same information).
</p>
<p>
  The Namespace model provides a <a href="metadataqueryclass.html#Namespace.namespace_name">namespace_name</a> string property (computed from the key). This computed property returns the name of the namespace specified by an entity's key. If the key is <code>1</code>, <code>namespace_name</code> returns an empty string (<code>''</code>).
</p>
<p>
  Namespace queries only support filtering as ranges over <code>__key__</code>. To simplify querying, the <a href="metadataqueryclass.html#key_for_namespace">Namespace.key_for_namespace</a> function builds the key from a namespace name.
</p>
<p>
  The following simple function returns a list of an application's namespaces between two optional names:
</p>
<pre class="prettyprint">
import google.appengine.ext.db
from google.appengine.ext.db.metadata import Namespace

def get_namespaces(start_ns, end_ns, limit):
  """Return a list of up to limit namespaces between start_ns and end_ns."""
  q = Namespace.all()
  if start_ns:
    q.filter('__key__ &gt;=', Namespace.key_for_namespace(start_ns))
  if end_ns:
    q.filter('__key__ &lt;=', Namespace.key_for_namespace(end_ns))
  results = q.fetch(limit)
  return map(lambda ns: ns.namespace_name, results)
</pre>


<h2 id="Kind_Queries">Kind Queries</h2>
<p>
  Like namespace queries, <code>__kind__</code> queries return entities whose key is the name of the kind, and with no properties (thus keys-only and non-keys-only queries return the same information). The Kind model provides a <a href="metadataqueryclass.html#Kind.kind_name">kind_name</a> string property computed from the key.
</p>
<p>
  The model for the special <code>__kind__</code> kind is in google.appengine.ext.db.metadata.Kind. You can perform queries using GQL or the Query interface returned by <code>Kind.all()</code>.
</p>
<p>
  Kind queries only support filtering over ranges over <code>__key__</code>; the <code>Kind.key_for_kind</code> method builds a <code>__kind__</code> key from a kind name. Kind queries are automatically restricted to the current namespace.
</p>
<p>
  As an example, the following code prints the kinds whose name starts with a lower-case letter:
</p>
<pre class="prettyprint">
import google.appengine.ext.db
from google.appengine.ext.db.metadata import Kind

q = Kind.all()
q.filter('__key__ &gt;=', Kind.key_for_kind('a'))
q.filter('__key__ &lt;', Kind.key_for_kind(chr(ord('z') + 1)))
for kind in q.fetch(100):
  print kind.kind_name
</pre>

<h2 id="Property_Queries">Property Queries</h2>
<p>
  Property queries allow you to return all properties associated with a kind, regardless whether or not these properties are currently defined on the model for this kind. The model for the special <code>__property__</code> kind is in <a href="metadataqueryclass.html#Property">google.appengine.ext.db.metadata.Property</a>. Property queries are a bit more complex than <code>__namespace__</code> and <code>__kind__</code> queries. We first describe the simpler keys-only <code>__property__</code> queries:
</p>
<ul>
  <li>
    They return a key per property <i>P</i> of kind <i>K</i>, built as follows:
  </li>
    <ul>
      <li>
        The key has type <code>__property__</code>, name <i>P</i>
      </li>
      <li>
        The key has a parent with type <code>__kind__</code>, name <i>K</i>
      </li>
    </ul>
  <li>
    Unindexed properties are not returned in <code>__property__</code> queries.
  </li>
  <li>
    <code>__property__</code> supports ancestor queries, where the ancestor is a <code>__kind__</code> or <code>__property__</code> key, which limits the query to a single kind or property.
  </li>
  <li>
    <code>__property__</code> supports <code>__key__</code> filters, where the keys are either <code>__kind__</code> or <code>__property__</code> keys.
  </li>
  <li>
    <code>__property__</code> queries are implicitly restricted to the current namespace.
  </li>
  <li>
    The Property model defines four methods to simplify building and examining <code>__property__</code> keys:
  </li>
</ul>
<pre class="prettyprint">
import google.appengine.ext.db
from google.appengine.ext.db.metadata import Property

# Build the key with type __kind__, name K
Property.key_for_kind(K):

# Build the key with type __property__, name P and 
# parent of type __kind__, name K
Property.key_for_property(K, P):

# Return the kind name in __property__ key KEY
Property.key_to_kind(KEY):

# Return the property name in __property__ key KEY
Property.key_to_property(KEY):
</pre>
<p>
  The <code>__key__</code> kind filters over kind-property pairs. For instance, if you have:
</p>
<ul>
  <li>Kind <i>A</i> with properties <i>m</i>, <i>q</i>, <i>z</i></li>
  <li>Kind <i>B</i> with properties <i>c</i>, <i>d</i></li>
  <li>Kind <i>C</i> with properties <i>a</i>, <i>b</i></li>
</ul>

<p>
  Then this query:
</p>
<pre class="prettyprint">
import google.appengine.ext.db
from google.appengine.ext.db.metadata import Property

q = db.GqlQuery("SELECT __key__ from __property__ WHERE __key__ &gt;= :1 AND __key__ &lt;= :2",
                Property.key_for_property("A", "t"),
                Property.key_for_property("C", "a"))
for p in q.fetch(100):
  print "%s: %s" % (Property.key_to_kind(p), Property.key_to_property(p))
</pre>
<p>
  prints the following:
</p>
<pre class="prettyprint">
  A: z
  B: c
  B: d
  C: a
</pre>
<p>
  Since the <code>__key__</code> kind filters on kind-property pairs, you can't use a single query for the same property name in different kinds. You can query for all properties in all kinds. You can also query for all properties in a range of kinds. But, for example, you cannot construct a single query that returns all properties with names between <i>b</i> and <i>q</i> in kinds <i>A</i> and <i>B</i>.
</p>
<p>
  Using ancestor queries makes it easy to get all the properties of a given kind, as in the following function:
</p>
<pre class="prettyprint">
import google.appengine.ext.db
from google.appengine.ext.db.metadata import Property

def properties_of_kind(name, limit):
  q = Property.all(keys_only=True)
  # Limit to specified kind
  q.ancestor(Property.key_for_kind(name))
  keys = q.fetch(limit)
  return map(lambda x: Property.key_to_property(x), keys)
</pre>


<h2 id="Property_Representation_Queries">Property Representation Queries</h2>
<p>
  A non-keys-only <code>__property__</code> query returns additional information on the representations used by each kind-property pair. Representations are not property classes: multiple propery classes map to the same representation (e.g. blobstore.BlobReferenceProperty and StringProperty both use the <code>STRING</code> representation). The following table maps from Property classes to representations:
</p>
<table>
  <tr>
    <th>
      Property Class
    </th>
    <th>
      Representation
    </th>
  </tr>
  <tr>
    <td>
      StringProperty
    </td>
    <td>
      STRING
    </td>
  </tr>
  <tr>
    <td>
      ByteStringProperty
    </td>
    <td>
      STRING
    </td>
  </tr>
  <tr>
    <td>
      BooleanProperty
    </td>
    <td>
      BOOLEAN
    </td>
  </tr>
  <tr>
    <td>
      IntegerProperty
    </td>
    <td>
      INT64
    </td>
  </tr>
  <tr>
    <td>
      FloatProperty
    </td>
    <td>
      DOUBLE
    </td>
  </tr>
  <tr>
    <td>
      DateTimeProperty<br>
      DateProperty
      <br>
      TimeProperty
    </td>
    <td>
      INT64
    </td>
  </tr>
  <tr>
    <td>
      ListProperty
      <br>
      StringListProperty
    </td>
    <td>
      the list element's representation
    </td>
  </tr>
  <tr>
    <td>
      Reference
    </td>
    <td>
      REFERENCE
    </td>
  </tr>
  <tr>
    <td>
      blobstore.BlobReferenceProperty
    </td>
    <td>
      STRING
    </td>
  </tr>
  <tr>
    <td>
      UserProperty
    </td>
    <td>
      USER
    </td>
  </tr>
  <tr>
    <td>
      BlobProperty
    </td>
    <td>
      STRING
    </td>
  </tr>
  <tr>
    <td>
      TextProperty
    </td>
    <td>
      STRING
    </td>
  </tr>
  <tr>
    <td>
      CategoryProperty
    </td>
    <td>
      STRING
    </td>
  </tr>
  <tr>
    <td>
      LinkProperty
    </td>
    <td>
      STRING
    </td>
  </tr>
  <tr>
    <td>
      EmailProperty
    </td>
    <td>
      STRING
    </td>
  </tr>
  <tr>
    <td>
      GeoPtProperty
    </td>
    <td>
      POINT
    </td>
  </tr>
  <tr>
    <td>
      IMProperty
    </td>
    <td>
      STRING
    </td>
  </tr>
  <tr>
    <td>
      PhoneNumberProperty
    </td>
    <td>
      STRING
    </td>
  </tr>
  <tr>
    <td>
      PostalAddressProperty
    </td>
    <td>
      STRING
    </td>
  </tr>
  <tr>
    <td>
      RatingProperty
    </td>
    <td>
      INT64
    </td>
  </tr>
</table>
<p>
  Entities returned by a non-keys-only <code>__property__</code> query for property <i>P</i> of kind <i>K</i> have:
</p>
<ul>
  <li>
    The same key as the keys-only query.
  </li>
  <li>
    A <code>property_representation</code> property that is a <code>StringListProperty</code>, which contains one String per representation for that property in any entity of the kind.
  </li>
</ul>
<p>
  The Property model also contains properties named <a href="metadataqueryclass.html#Property.kind_name">kind_name</a> and <a href="metadataqueryclass.html#Property.property_name">property_name</a>. These properties are computed from the entity's key.
</p>
<p>
  The following simple function finds all the representations of a given property in a kind:
</p>
<pre class="prettyprint">
import google.appengine.ext.db

def representations_of(kind_name, property_name):
  q = Property.all()
  # Limit query to specified kind, property
  q.ancestor(Property.key_for_property(kind_name, property_name))
  results = q.fetch(1)
  if results:
    return results[0].property_representation
  else:
    # No information found
    return []
</pre>



<h2 id="Quota_Usage">Quota Usage</h2>
<p>
  Metadata queries use more quota than normal queries. As a rule of thumb, expect a metadata query that returns <i>N</i> entities to cost about the same as <i>N</i> queries each returning a single entity. Furthermore, property representation queries (non-keys-only <code>__property__</code> queries) are more expensive than keys-only <code>__property__</code> queries. In general, metadata queries are slower than normal queries.
</p>



      </div><!-- end gc-pagecontent -->
   </div><!-- end gooey wrapper -->

    </div> <!-- end codesite content -->


<div id="gc-footer" dir="ltr">
  <div class="text">
    
      <div class="notice"><div id="notice" style="text-align: center; border: 1em 0em 1em 0em">
  Except as otherwise <a
  href="http://code.google.com/policies.html#restrictions">noted</a>,
  the content of this page is licensed under the <a rel="license"
  href="http://creativecommons.org/licenses/by/3.0/">Creative Commons
  Attribution 3.0 License</a>, and code samples are licensed under the
  <a rel="license" href="http://www.apache.org/licenses/LICENSE-2.0">Apache
  2.0 License</a>.
<!-- <rdf:RDF xmlns="http://web.resource.org/cc/" 
              xmlns:dc="http://purl.org/dc/elements/1.1/"
              xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
  <Work rdf:about="">
    <license rdf:resource="http://creativecommons.org/licenses/by/3.0/" />
  </Work>
  <License rdf:about="http://creativecommons.org/licenses/by/3.0/">
    <permits rdf:resource="http://web.resource.org/cc/Reproduction"/>
    <permits rdf:resource="http://web.resource.org/cc/Distribution"/>
    <requires rdf:resource="http://web.resource.org/cc/Notice"/>
    <requires rdf:resource="http://web.resource.org/cc/Attribution"/>
    <permits rdf:resource="http://web.resource.org/cc/DerivativeWorks"/>
  </License>
</rdf:RDF> -->
</div>
Java is a registered trademark of Oracle and/or its affiliates</div>
    
    ©2011 Google -
    <a href="http://code.google.com">Code Home</a> -
    <a href="http://code.google.com/terms.html">Terms of Service</a> -
    <a href="http://code.google.com/privacy.html">Privacy Policy</a> -
    <a href="http://code.google.com/more">Site Directory</a>
    <br> <br>
    Google Code offered in:
    <a href="http://code.google.com/intl/en">English</a> -
    <a href="http://code.google.com/intl/es">Español</a> -
    <a href="http://code.google.com/intl/ja">日本語</a> -
    <a href="http://code.google.com/intl/ko">한국어</a> -
    <a href="http://code.google.com/intl/pt-BR">Português</a> -
    <a href="http://code.google.com/intl/ru">Pусский</a> -
    <a href="http://code.google.com/intl/zh-CN">中文(简体)</a> -
    <a href="http://code.google.com/intl/zh-TW">中文(繁體)</a>
  </div>
</div><!-- end gc-footer -->

</div><!-- end gc-container -->

<script type="text/javascript">CODESITE_CSITimer['load'].tick('ats');</script>
<script src="../../../../js/codesite_tail.pack.04102009.js" type="text/javascript"></script>




<script type="text/javascript">
var _gaq = _gaq || [];

_gaq.push(


    ['siteTracker._setAccount', 'UA-18071-1'],
    ['siteTracker._setDomainName', 'code.google.com'],
    ['siteTracker._setCookiePath', window.location.pathname.substring(0,
        window.location.pathname.lastIndexOf('/') + 1)],
    ['siteTracker._trackPageview']
);
(function() {
  var ga = document.createElement('script');

  ga.type = 'text/javascript';
  ga.async = true;
  ga.src = 'http://www.google-analytics.com/ga.js';
  (document.getElementsByTagName('head')[0] ||
   document.getElementsByTagName('body')[0]).appendChild(ga);
 })();
</script>




  </body>
</html>


